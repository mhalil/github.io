<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Metadata -->
	<meta name="description" content="3D Modelleme, Animasyon, Render, Vektör - Raster Grafik İşleme ve Python ile Programlama konularına meraklı Açık Kaynak Hayranı bir Makine Mühendisi">
	<meta property="og:description" content="3D Modelleme, Animasyon, Render, Vektör - Raster Grafik İşleme ve Python ile Programlama konularına meraklı Açık Kaynak Hayranı bir Makine Mühendisi">
	<meta property="og:title" content="Pandas 10 - pivot_table() Fonksiyonunun Kullanımı" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="/pandas-10-pivot_table-fonksiyonunun-kullanimi.html" />
		<meta property="og:image" content="/images/avatar.png" />

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>mhalil - Programlama ve 3D</title>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">

		<link rel="stylesheet" href="/theme/css/poole.css" />
		<link rel="stylesheet" href="/theme/css/hyde.css" />
		<link rel="stylesheet" href="/theme/css/syntax.css" />
			<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" crossorigin="anonymous">

		<!-- Feeds -->

		<!-- Analytics -->
	</head>

	<body class="theme-base-0c">
<div class="sidebar">
	<div class="container sidebar-sticky">
		<div class="sidebar-about">

			<h1>
				<a href="/">
					<img class="profile-picture" src="/images/avatar.png">
					mhalil
				</a>
			</h1>
			<p class="lead"></p>
			<p class="lead">3D Modelleme, Animasyon, Render, Vektör - Raster Grafik İşleme ve Python ile Programlama konularına meraklı Açık Kaynak Hayranı bir Makine Mühendisi </p>
			<p></p>
		</div>
			<ul class="sidebar-nav">
					<li><a href="/archives.html">Arşiv</a></li>
					<li><a href="/categories.html">Kategoriler</a></li>
					<li><a href="/tags.html">Etiketler</a></li>
					<li><a href="/pages/blender.html">Blender</a></li>
					<li><a href="/pages/freecad.html">FreeCAD</a></li>
					<li><a href="/pages/librecad.html">LibreCAD</a></li>
					<li><a href="/pages/python.html">Python</a></li>
					<li><a href="/pages/solvespace.html">Solvespace</a></li>
			</ul>
		<nav class="sidebar-social">
					<a class="sidebar-social-item" href="https://twitter.com/AcikKaynakci" target="_blank">
						<i class="fa fa-twitter"></i>
					</a>
					<a class="sidebar-social-item" href="https://www.artstation.com/mustafahalil" target="_blank">
						<i class="fa fa-artstation"></i>
					</a>
					<a class="sidebar-social-item" href="https://github.com/mhalil" target="_blank">
						<i class="fa fa-github"></i>
					</a>
			<a class="sidebar-social-item" href="/">
				<i class="fa fa-rss"></i>
			</a>
		</nav>
			<p class="sidebar-footer">İlmin zekatı %100'dür. Bildiklerizi paylaşın.</p>
	</div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">Pandas 10 - pivot_table() Fonksiyonunun Kullanımı</h1>
	<span class="post-date">Sal 19 Temmuz 2022</span>
	<h1>Pandas'ta Pivot Table (Özet Tablo) Fonksiyonunun Kullanımı</h1>
<p>Verilerinize ilişkin özet tablola oluşturmak konusunda, Excel'deki pivot tablolara aşina olabilirsiniz. Burada, <code>.pivot_table()</code> metodunu kullanarak Python ve Pandas'ta nasıl pivot (özet) tablolar oluşturacağımızı öğreneceğiz. Elimden geldiğince öğrendiklerimi bu 
sayfaya ekleyeceğim.</p>
<p>Pivot Tablolar, verileri hızlı bir şekilde özetleyebilmek, verilerinizin nasıl göründüğüne dair bir fikir edinebilmek için önemli bir beceridir. İşlev, Pandas'ta da bulunan
 <code>.groupby()</code> yöntemine oldukça benzer, ancak burada daha sonra göreceğimiz gibi, önemli ölçüde daha fazla özelleştirme sunar.</p>
<p>Bu eğitimin sonunda şunları öğrenmiş olacaksınız:</p>
<ul>
<li><code>pivot_table()</code> fonksiyonu nasıl kullanılır? ve parametreleri neyi temsil eder.</li>
<li>Tekil indeks veya çoklu indeks kullanarak veriler nasıl gruplanır?</li>
<li>İndeksler ve sütunlar kullanılarak tablo nasıl daha farklı hale döndürülür?</li>
<li>Kendi toplama yöntemlerinizi nasıl belirleyip oluşturabilirsiniz?</li>
<li>Toplamlar nasıl hesaplanır ve eksik verilerle nasıl başa çıkılır?</li>
</ul>
<h2>Python'da Pivot Tablo Nasıl Oluşturulur</h2>
<p>Pivot tablo, daha büyük bir tablonun verilerini, bu verileri <strong>'işleyerek'</strong> özetlemeye yardımcı olan bir istatistik tablosudur. Microsoft Excel, PivotTable olarak bilinen pivot tabloyu popüler hale getirdi. Pandas, <code>.pivot_table()</code> fonksiyonunu kullanarak, Python'da özet tablolar oluşturmaya imkan sağlar. Fonksiyon, aşağıdaki varsayılan parametrelere sahiptir:</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># .pivot_table() fonksiyonunun sözdizimi;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> 
    <span class="n">fill_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
    <span class="n">margins</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
    <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
    <span class="n">margins_name</span><span class="o">=</span><span class="s1">&#39;All&#39;</span><span class="p">,</span> 
    <span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">sort</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>     
</code></pre></div>

<p>Metot/Yöntem bir Veri Çerçevesi (DataFrame) alır ve ardından bir DataFrame döndürür. Aşağıdaki tablo, fonksiyonda bulunan parametrelere genel bir bakış sağlar:</p>
<table>
<thead>
<tr>
<th>Parametre</th>
<th>Varsayılan Değer</th>
<th>Tanım / Açıklama</th>
</tr>
</thead>
<tbody>
<tr>
<td>data=</td>
<td></td>
<td>Özet Tablo haline getirilecek (Döndürülecek) Veri Çerçevesi (DataFrame)</td>
</tr>
<tr>
<td>values=</td>
<td></td>
<td>Toplanacak sayı değerlerinin bulunduğu sütun (boşsa, tüm sayısal değerleri toplayacaktır)</td>
</tr>
<tr>
<td>index=</td>
<td></td>
<td>Verilerin gruplanacağı sütun veya sütunlar. Tekil sütun için bir <br>dize/string ifade olabilirken, çoklu sütunlar için bir dize/string <br>listesi (<strong>list()</strong> yapısı) olmalıdır</td>
</tr>
<tr>
<td>columns=</td>
<td></td>
<td>Verilerin gruplanacağı sütun veya sütunlar. Tekil sütun için bir <br>dize/string ifade olabilirken, çoklu sütunlar için bir dize/string <br>listesi (<strong>list()</strong> yapısı) olmalıdır</td>
</tr>
<tr>
<td>aggfunc=</td>
<td>‘mean’</td>
<td>Sayısal Veriler için "ortalama, toplama,...vb" fonksiyon veya fonksiyon listesi</td>
</tr>
<tr>
<td>fill_value=</td>
<td></td>
<td>Eksik / Kayıp değerlerin yerine atanacak değer</td>
</tr>
<tr>
<td>dropna=</td>
<td>True</td>
<td>Tüm girişlerin <strong>NaN</strong> olduğu sütunları dahil etmemeyi seçmek için kullan</td>
</tr>
<tr>
<td>margins=</td>
<td>False</td>
<td>Satır ve Sütunlar ekleyin Toplam değerleri ekle</td>
</tr>
<tr>
<td>margins_name=</td>
<td>‘All’</td>
<td>Toplam satır/sütun adı</td>
</tr>
<tr>
<td>observed=</td>
<td>False</td>
<td>Sadece kategorik veriler içindir - Eğer <code>True</code> ise, sadece kategorik gruplar için gözlemlenen değerleri gösterir</td>
</tr>
<tr>
<td>sort=</td>
<td>True</td>
<td>Elde edilen değerlerin sıralanıp sıralanmayacağını belirtir.</td>
</tr>
</tbody>
</table>
<p>Artık fonksiyonda bulunan parametreleri anladığınıza göre, veri setimizi yükleyelim ve verilerimizi keşfetmeye başlayalım.</p>
<h2>Örnek Veri Çerçevesi (DataFrame) Oluşturalım</h2>
<p>Bu eğitimi takip etmek için örnek bir Pandas Veri Çerçevesi (DataFrame) oluşturalım. DataFrame'i aşağııdaki GitHub sayfasındaki ilgili dosyadan <code>pd.read_excel()</code> işlevini kullanarak yükleyebiliriz. Ardından, <code>.head()</code> yöntemini kullanarak veri kümesinin ilk beş kaydını yazdırabiliriz.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;https://github.com/datagy/mediumdata/raw/master/sample_pivot.xlsx&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div>

<table>
<thead>
<tr>
<th></th>
<th>Date</th>
<th>Region</th>
<th>Type</th>
<th>Units</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>2020-07-11</td>
<td>East</td>
<td>Children's Clothing</td>
<td>18.0</td>
<td>306</td>
</tr>
<tr>
<td>1</td>
<td>2020-09-23</td>
<td>North</td>
<td>Children's Clothing</td>
<td>14.0</td>
<td>448</td>
</tr>
<tr>
<td>2</td>
<td>2020-04-02</td>
<td>South</td>
<td>Women's Clothing</td>
<td>17.0</td>
<td>425</td>
</tr>
<tr>
<td>3</td>
<td>2020-02-28</td>
<td>East</td>
<td>Children's Clothing</td>
<td>26.0</td>
<td>832</td>
</tr>
<tr>
<td>4</td>
<td>2020-03-19</td>
<td>West</td>
<td>Women's Clothing</td>
<td>3.0</td>
<td>33</td>
</tr>
</tbody>
</table>
<p>Yukarıda gösterilen çıktıya dayanarak, çalışmak için beş sütunumuz olduğunu görebiliriz:</p>
<table>
<thead>
<tr>
<th>Sütun Adı</th>
<th>Tanım/Açıklama</th>
</tr>
</thead>
<tbody>
<tr>
<td>Date</td>
<td>İşlem tarihi</td>
</tr>
<tr>
<td>Region</td>
<td>İşlem bölgesi</td>
</tr>
<tr>
<td>Type</td>
<td>Satılan giysi türü</td>
</tr>
<tr>
<td>Units</td>
<td>Satılan birim sayısı</td>
</tr>
<tr>
<td>Sales</td>
<td>Satışın maliyeti</td>
</tr>
</tbody>
</table>
<p>Artık verilerle ilgili biraz daha fazla bilgimiz olduğuna göre, Pandas'ta ilk Pivot (Özet) Tablomuzu oluşturalım.</p>
<h2>Pandas'ta Pivot Tablo Oluşturmak</h2>
<p>İlk Pandas pivot tablonuzu oluşturalım. En azından, <code>index=</code> veya <code>column=</code> parametrelerini kullanarak bir tür grup anahtarı belirlemeliyiz. 
Aşağıdaki örneklerde DataFrame fonksiyonu yerine Pandas fonksiyonunu 
kullanıyoruz. Bu nedenle, <code>data=</code> parameresini belirtmemiz gerekiyor. Yöntemi doğrudan DataFrame'e uygularsak (örneğin: <code>df.pivot_table(...)</code>), bu parametre <code>data= df</code> şeklinde ima edilmiş olur.</p>
<div class="highlight"><pre><span></span><code><span class="n">sales_by_region</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>408.182482</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
</tr>
</tbody>
</table>
<p>Yukarıdaki kodu, daha anlaşılır olduğunu düşünenler aşağıdaki şekilde yazıp çalıştırabilir. İkisi de aynı sonucu verir.</p>
<div class="highlight"><pre><span></span><code><span class="n">sales_by_region</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>408.182482</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
</tr>
</tbody>
</table>
<p>Çıktıyı parçalara bölüp irdeleyelim.</p>
<ol>
<li><code>pd.pivot_table()</code> fonksiyonu kullanılarak oluşturulan, <strong>sales_by_region</strong> adlı yeni bir DataFrame oluşturduk.</li>
<li>Veri Çerçevesi (DataFrame) olarak, <code>df</code>'yi belirtik ve <code>index='region'</code> parametresi ile <strong>region</strong> sütununu indeks değeri olarak belirledik, yani veriler bölge sütununa göre gruplanacak.</li>
</ol>
<p>Diğer tüm parametreler varsayılan değerlerine bırakıldığı için Pandas şu varsayımı yaptı:</p>
<ul>
<li>Veriler, her sütunun ortalamasına göre toplanmalıdır (aggfunc='mean')</li>
<li>Değerler herhangi bir sayısal sütun olmalıdır</li>
</ul>
<h2>Pandas Özet Tablosunda Sadece Belirli Sütunları Toplamak</h2>
<p>Yukarıdaki örnekte, <code>values=</code> parametresini değiştirmediniz. Bu nedenle, tüm sayısal sütunlar toplanmış oldu. Bu, her zaman ideal olmayabilir. Bu nedenle Pandas, tek bir sütunu temsil eden tek bir dize/string veya birden çok sütunu temsil eden bir 
dizi/string listesi iletmemize izin verir.</p>
<p>Şimdi kodumuzu, sadece <strong>Satışların (Sales)</strong> ortalamasını hesaplayacak şekilde değiştirelim:</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>408.182482</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
</tr>
</tbody>
</table>
<p>Tüm sayısal sütunları toplamak yerine yalnızca belirtilen sütunun toplandığını görebiliriz.</p>
<h2>Pandas Özet Tablosunda Toplama Yöntemleriyle Çalışmak</h2>
<p>Pandas'ta ilk pivot tablonuzu oluşturduğunuza göre, şimdi toplama yöntemlerini değiştirmeye çalışalım. Bu, verilerinizin nasıl bir araya getirilmesini istediğinizi belirtmenize olanak tanır. Pandas'ın gücünün gerçekten ortaya çıktığı yer burasıdır ve karmaşık analizleri kolaylıkla hesaplamanıza olanak tanır.</p>
<h2>Pandas Özet Tablosunda Toplama Yöntemini Belirtmek</h2>
<p>Verilerin bir pivot tabloda nasıl toplandığını değiştirmek için <code>aggfunc=</code> (aggregation function yani toplama fonksiyonu) parametresini kullanabilirsiniz. Pandas, varsayılan olarak verileri toplamak için <code>.mean()</code> yöntemini kullanır. <code>'mean'</code>, <code>'sum'</code> veya <code>'max'</code> gibi adlandırılmış bir işlevi veya <code>np.mean</code> gibi çağrılabilir bir fonksiyon/işlevi iletebilirsiniz.</p>
<p>Şimdi tüm bölgelerdeki satışlarımızın <strong>toplamını</strong> bulmak için davranışımızı değiştirmeye çalışalım:</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Sales</th>
<th>Units</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>167763</td>
<td>8110.0</td>
</tr>
<tr>
<td>North</td>
<td>138700</td>
<td>4359.0</td>
</tr>
<tr>
<td>South</td>
<td>59315</td>
<td>2798.0</td>
</tr>
<tr>
<td>West</td>
<td>61476</td>
<td>2624.0</td>
</tr>
</tbody>
</table>
<h2>Pandas DataFrame'de Çoklu Toplama Yöntemi</h2>
<p>Benzer şekilde, bir Pandas pivot tablosuna birden çok toplama yöntemi belirtebiliriz. Bu oldukça kolaydır ve sadece bir fonksiyon listesi yazmanızı gerektirir ve fonksiyon, tüm değer barındıran sütunlarına uygulanır. Hem <strong>ortalama</strong> hem de <strong>toplam</strong> için değerler üretelim:</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>mean</th>
<th></th>
<th>sum</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>Sales</td>
<td>Units</td>
<td>Sales</td>
<td>Units</td>
</tr>
<tr>
<td>East</td>
<td>408.182482</td>
<td>19.732360</td>
<td>167763</td>
<td>8110.0</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
<td>19.202643</td>
<td>138700</td>
<td>4359.0</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
<td>20.423358</td>
<td>59315</td>
<td>2798.0</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
<td>19.294118</td>
<td>61476</td>
<td>2624.0</td>
</tr>
</tbody>
</table>
<p>Bunun ne kadar kolay olduğunu ve ne kadar daha fazla veri sağladığını görebiliyoruz! Sayısal verileri içeren her sütun için hem <strong>ortalama</strong> hem de <strong>toplam</strong> oluşturuldu.</p>
<h2>Farklı Sütunlar için Farklı Toplama Yöntemi Belirtmek</h2>
<p>Şimdi, Farklı Sütunlar için Farklı Toplama Yöntemi Belirtmek istediğinizi hayal edin. 
Bunu yapmak için, aşağıdaki anahtar/değer çifti biçimini içeren bir <strong>sözlüğü</strong> iletebilirsiniz: <code>'sütun': fonksiyon</code>. <code>Birimlerin (Units) toplamını ve ortalama satış sayısını</code> hesaplamak istediğimizi varsayalım:</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Sales&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;Units&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">}</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Sales</th>
<th>Units</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>408.182482</td>
<td>8110.0</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
<td>4359.0</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
<td>2798.0</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
<td>2624.0</td>
</tr>
</tbody>
</table>
<p>Bu, aynı DataFrame'de farklı temel performans göstergeleri arasında karşılaştırılan verileri kolayca görmenizi sağlar.</p>
<h2>Pandas'ta Özet Tablolarında Özel Toplamaları</h2>
<p>Pandas, ayrıca özel bir fonksiyonu <strong>.pivot_table()</strong> fonksiyonu olarak kullanmanızı (pandas fonksiyonuna dönüştürmeyi) sağlar. Bu, ihtiyaçlarınıza göre özel olarak tasarlanmış analizlerle çalışma yeteneğimizi büyük ölçüde genişletir! Bir sütunun ortalamasını herhangi bir aykırı değer olmadan hesaplayan bir fonksiyona nasıl 
dönüştürebileceğimizi görelim.</p>
<p>Pandas, veri aralığındaki yüzdelerine göre seçmek istediğimiz bir dizi değeri tanımlamamıza izin veren bir <strong>.quantiles()</strong> yöntemiyle birlikte gelir. Diyelim ki, verilerin üst ve alt <strong>%10</strong>'unu kaldırarak bir sütunun ortalamasını hesaplamak istedik. Aşağıdaki fonksiyonu tanımlayabiliriz:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="k">def</span> <span class="nf">mean_no_outliers</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="n">no_outliers</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">])</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">no_outliers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mean</span>
</code></pre></div>

<p>Yukarıdaki fonksiyon, <code>.pivot_table()</code> fonksiyonu tarafından iletilen <code>değerler (values)</code> olacak olan tek bir parametreyi kabul eder. Değerler daha sonra <code>.quantile()</code> metodu/yöntemi kullanılarak filtrelenir. Son olarak, bu değerlerin 
ortalaması hesaplanır. Satış (Sales) sütunumuza uygulanan pivot tablomuzda bunu (ve normal <code>ortalama (mean)</code> toplamayı) nasıl kullanabileceğimizi görelim.</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">mean_no_outliers</span><span class="p">],</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>mean</th>
<th>mean_no_outliers</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>Sales</td>
<td>Sales</td>
</tr>
<tr>
<td>East</td>
<td>408.182482</td>
<td>436.0</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
<td>484.5</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
<td>434.1</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
<td>497.0</td>
</tr>
</tbody>
</table>
<h2>Daha Karmaşık Pandas Pivot Tabloları</h2>
<p>Artık <code>.pivot_table()</code> fonksiyonunun Pandas'ta nasıl kullanıldığını anladığınıza göre, şimdi anlayışımızı nasıl genişletebileceğimize bir göz atalım. Bu bölümde, Pandas pivot 
tablolarımıza nasıl sütun ve çoklu indeks ekleyeceğinizi öğreneceksiniz.</p>
<h2>Pandas Özet Tablosuna Sütun Eklemek</h2>
<p>Bir Pandas pivot tablosuna sütun eklediğimizde, verilere başka bir boyut ekleriz. <code>index=</code> parametresi verileri dikey olarak bölerken, <code>column=</code> parametresi verileri yatay olarak gruplar ve böler. Bu, okunması kolay bir tablo oluşturmamızı sağlar. Verileri <strong>Type</strong> sütununa göre bölmek için <code>column=</code> parametresini nasıl kullanabileceğimizi görelim.</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Type</th>
<th>Children's Clothing</th>
<th>Men's Clothing</th>
<th>Women's Clothing</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Region</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>East</td>
<td>405.743363</td>
<td>423.647541</td>
<td>399.028409</td>
</tr>
<tr>
<td>North</td>
<td>438.894118</td>
<td>449.157303</td>
<td>432.528169</td>
</tr>
<tr>
<td>South</td>
<td>412.666667</td>
<td>475.435897</td>
<td>418.924528</td>
</tr>
<tr>
<td>West</td>
<td>480.523810</td>
<td>465.292683</td>
<td>419.188679</td>
</tr>
</tbody>
</table>
<p>Tamamen başka bir veri boyutunu eklemenin ne kadar kolay olduğunu görebiliriz. Bu, gruplandırmalar arasındaki farkları okunması kolay bir biçimde belirlememizi sağlar.</p>
<h2>Pandas Özet Tablolarına Birden Çok Dizin Eklemek</h2>
<p>Sütunlar yatay bir boyut eklerken, verilerimizde mantıksal bir hiyerarşi olduğunda birden çok dizin de belirtebiliriz. Örneğin, pivot tablomuza bir tarih boyutu ekleyebiliriz. Verilerimizi çeyreklere göre gruplandırmak için Pandas'ın yerleşik tarih formatını kullanalım. Bu, daha sonra, verilerimizi belirli bir süre boyunca görselleştirmemizi 
sağlar. Bunun nasıl çalıştığını görelim:</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">quarter</span><span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span>
<span class="p">)</span>

<span class="n">pivot</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<table>
<thead>
<tr>
<th></th>
<th>Type</th>
<th>Children's Clothing</th>
<th>Men's Clothing</th>
<th>Women's Clothing</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Region</strong></td>
<td><strong>Date</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>East</td>
<td>1</td>
<td>423.241379</td>
<td>369.250000</td>
<td>428.948718</td>
</tr>
<tr>
<td>2</td>
<td>274.800000</td>
<td>445.425000</td>
<td>456.816327</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>425.382353</td>
<td>506.421053</td>
<td>342.386364</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>453.866667</td>
<td>405.666667</td>
<td>364.795455</td>
<td></td>
</tr>
<tr>
<td>North</td>
<td>1</td>
<td>394.727273</td>
<td>450.869565</td>
<td>489.944444</td>
</tr>
</tbody>
</table>
<p>Bu, çok indeksli bir Pandas DataFrame döndürür. Daha karmaşık görünse de, çok indeksli bir Pandas DataFrame'deki verilere erişim, diğer herhangi bir DataFrame'deki verilere erişmeye oldukça benzer şekilde çalışır. Bununla birlikte, artık 1 yerine <strong>iki dizin sütunumuz</strong> olduğundan, bir dize/string dizini iletebiliriz. Diyelim sadece <strong>Doğu Bölgesi(East), Çeyrek 1</strong> ve <strong>Erkek giyim (Men's Clothing)</strong> kesişimine erişmek istedik, bu durumda, aşağıdaki kodu kullanabiliriz:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;East&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;Men&#39;s Clothing&quot;</span><span class="p">])</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">369.25</span>
</code></pre></div>

<h2>Panda Pivot Tablolarını Özelleştirmek</h2>
<p>Bu başlık altında, Pandas pivot tablolarınızı nasıl özelleştireceğinizi öğreneceksiniz. Bu, toplamları ekleme ve eksik verilerle çalışma gibi daha da fazla özelleştirme eklemenize olanak tanır. Ayrıca, belirli bir değerle ortaya çıkan bir pivot tabloda, eksik verileri nasıl dolduracağınızı da öğreneceksiniz.</p>
<h2>Pandas Özet Tablolarına Toplamların Eklemesi</h2>
<p>Pandas pivot tablosuna toplamları nasıl ekleyeceğinizi öğrenerek başlayalım. Bu, bir boole değeri kabul eden <code>margins=</code> parametresi tarafından kontrol edilir. Varsayılan olarak bu, <code>False</code> olarak ayarlanmıştır, ancak <code>True</code> olarak değiştirildiğinde, <strong>toplamlar satırlara ve sütunlara eklenir</strong>. Bunun neye benzediğini görelim:</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="n">margins</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Type</th>
<th>Children's Clothing</th>
<th>Men's Clothing</th>
<th>Women's Clothing</th>
<th>All</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Region</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>East</td>
<td>405.743363</td>
<td>423.647541</td>
<td>399.028409</td>
<td>408.182482</td>
</tr>
<tr>
<td>North</td>
<td>438.894118</td>
<td>449.157303</td>
<td>432.528169</td>
<td>438.924051</td>
</tr>
<tr>
<td>South</td>
<td>412.666667</td>
<td>475.435897</td>
<td>418.924528</td>
<td>432.956204</td>
</tr>
<tr>
<td>West</td>
<td>480.523810</td>
<td>465.292683</td>
<td>419.188679</td>
<td>452.029412</td>
</tr>
<tr>
<td>All</td>
<td>427.743860</td>
<td>444.257732</td>
<td>415.254717</td>
<td>427.254000</td>
</tr>
</tbody>
</table>
<p>Varsayılan olarak, Pandas toplamları 'All (Tümü)' olarak adlandırır. 
Bu etiketleri yeniden adlandırmak istiyorsanız, değerleri yeniden etiketlemek üzere bir dize/string iletmek için <code>margins_name=</code> parametresini kullanabilirsiniz.</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="n">margins</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">margins_name</span><span class="o">=</span><span class="s1">&#39;Total&#39;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Type</th>
<th>Children's Clothing</th>
<th>Men's Clothing</th>
<th>Women's Clothing</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Region</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>East</td>
<td>405.743363</td>
<td>423.647541</td>
<td>399.028409</td>
<td>408.182482</td>
</tr>
<tr>
<td>North</td>
<td>438.894118</td>
<td>449.157303</td>
<td>432.528169</td>
<td>438.924051</td>
</tr>
<tr>
<td>South</td>
<td>412.666667</td>
<td>475.435897</td>
<td>418.924528</td>
<td>432.956204</td>
</tr>
<tr>
<td>West</td>
<td>480.523810</td>
<td>465.292683</td>
<td>419.188679</td>
<td>452.029412</td>
</tr>
<tr>
<td>Total</td>
<td>427.743860</td>
<td>444.257732</td>
<td>415.254717</td>
<td>427.254000</td>
</tr>
</tbody>
</table>
<h2>Pandas Özet Tablosunda Eksik/Kayıp Verilerle Başa Çıkmak</h2>
<p>Pandas hiçbir verinin olmadığı bir kesitle karşılaştığında, ortaya çıkan pivot tabloya bir <code>NaN</code> değeri ekler. DataFrame'imizi bazı eksik verileri içerecek şekilde değiştirelim:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;East&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Children&#39;s Clothing&quot;</span><span class="p">),</span> <span class="s1">&#39;Sales&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>

<span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Type</th>
<th>Children's Clothing</th>
<th>Men's Clothing</th>
<th>Women's Clothing</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Region</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>East</td>
<td>NaN</td>
<td>423.647541</td>
<td>399.028409</td>
</tr>
<tr>
<td>North</td>
<td>438.894118</td>
<td>449.157303</td>
<td>432.528169</td>
</tr>
<tr>
<td>South</td>
<td>412.666667</td>
<td>475.435897</td>
<td>418.924528</td>
</tr>
<tr>
<td>West</td>
<td>480.523810</td>
<td>465.292683</td>
<td>419.188679</td>
</tr>
</tbody>
</table>
<p>Özellikle teknik bilgisi olmayan kullanıcılar için bir <code>NaN</code> değeri görmek her zaman ideal olmayabilir. Bu nedenle Pandas, bu eksik veri noktalarını doldurmak için bir değer iletmenizi sağlayan <code>fill_value=</code> parametresini sunar. Örneğin, tüm bu <code>NaN</code> değerleri <strong>0</strong> ile doldurmak istersek, basitçe bu parametreyi ekleyebiliriz:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;East&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Children&#39;s Clothing&quot;</span><span class="p">),</span> <span class="s1">&#39;Sales&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>

<span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Type</th>
<th>Children's Clothing</th>
<th>Men's Clothing</th>
<th>Women's Clothing</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Region</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>East</td>
<td>0.000000</td>
<td>423.647541</td>
<td>399.028409</td>
</tr>
<tr>
<td>North</td>
<td>438.894118</td>
<td>449.157303</td>
<td>432.528169</td>
</tr>
<tr>
<td>South</td>
<td>412.666667</td>
<td>475.435897</td>
<td>418.924528</td>
</tr>
<tr>
<td>West</td>
<td>480.523810</td>
<td>465.292683</td>
<td>419.188679</td>
</tr>
</tbody>
</table>
<h2>Pandas Özet Tablo Verilerini Sıralamak</h2>
<p>Pandas'a, sürüm 1.3.0'dan başlayarak, elde edilen DataFrame'i sıralamanıza olanak tanıyan yeni bir parametre eklendi. Eskiden, önce DataFrame'i oluşturmanız ve ardından verileri sıralamak için bir yöntem iletmeniz gerekirdi. Şimdi, elde ettiğiniz DataFrame'inizi sıralamaya yardımcı olması için <code>sort=True</code> parametresini/argümanını basitçe iletebilirsiniz.</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span>
    <span class="n">sort</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>409.107383</td>
</tr>
<tr>
<td>North</td>
<td>438.924051</td>
</tr>
<tr>
<td>South</td>
<td>432.956204</td>
</tr>
<tr>
<td>West</td>
<td>452.029412</td>
</tr>
</tbody>
</table>
<p>Pandas varsayılan olarak pivot tabloyu artan düzende sıralar. Ne yazık ki, daha karmaşık sıralama için (farklı sütunlar arasında olduğu gibi), yine de <code>.sort_values()</code> yöntemini peşpeşe uygulamanız gerekir.</p>
<h2>Python Pivot Tablolarını Filtrelemek</h2>
<p>Bu başlıkta, bir Pandas pivot tablosunu nasıl filtreleyeceğinizi öğreneceksiniz. Pivot tablolar genellikle oldukça büyük olabileceğinden, bir pivot tabloyu filtrelemek sonuçlara odaklanmayı sağlar. Fonksiyon bir DataFrame döndürdüğünden, DataFrame'i başka herhangi bir filtrede yaptığınız gibi filtreleyebilirsiniz. <strong>Çeyrekler ve bölgeler (quarters and regions)</strong> üzerinden değerler toplayarak pivot tablomuzu yeniden oluşturalım.</p>
<div class="highlight"><pre><span></span><code><span class="n">pivot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">quarter</span><span class="p">],</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Sales&#39;</span>
<span class="p">)</span>

<span class="n">pivot</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Date</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>1</td>
<td>400.293333</td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>451.696629</td>
</tr>
<tr>
<td></td>
<td>3</td>
<td>391.857143</td>
</tr>
<tr>
<td></td>
<td>4</td>
<td>380.338028</td>
</tr>
<tr>
<td>North</td>
<td>1</td>
<td>462.142857</td>
</tr>
</tbody>
</table>
<p>Şimdi yapabileceğimiz şey, ya skaler bir değere ya da dinamik bir değere göre filtrelemek. Örneğin, sabit kodlanmış bir değere göre basitçe filtreleyebiliriz. Ancak, örneğin, sadece Satış ortalamasının (Sales average) genel ortalamadan (overall average) daha büyük olduğu kayıtları gösterecek şekilde filtrelemek istedik, aşağıdaki filtreyi 
yazabiliriz:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">pivot</span><span class="p">[</span><span class="n">pivot</span><span class="p">[</span><span class="s1">&#39;Sales&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">[</span><span class="s1">&#39;Sales&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()])</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>Region</th>
<th>Date</th>
<th>Sales</th>
</tr>
</thead>
<tbody>
<tr>
<td>East</td>
<td>2</td>
<td>451.696629</td>
</tr>
<tr>
<td>North</td>
<td>1</td>
<td>462.142857</td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>442.034884</td>
</tr>
<tr>
<td></td>
<td>3</td>
<td>447.200000</td>
</tr>
<tr>
<td>South</td>
<td>1</td>
<td>465.263158</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>440.628571</td>
</tr>
<tr>
<td>West</td>
<td>1</td>
<td>475.000000</td>
</tr>
<tr>
<td></td>
<td>3</td>
<td>444.884615</td>
</tr>
<tr>
<td></td>
<td>4</td>
<td>466.209302</td>
</tr>
</tbody>
</table>
<p>Bu kod, tam olarak istediğimizi görmemizi sağladı.</p>
<h2>Sonuç ve Özet</h2>
<p>Bu eğitim içeriğinde, doğrudan bir Pandas DataFrame'den Excel stili pivot tablolar oluşturmak için Pandas <code>.pivot_table()</code> fonksiyonunun/işlevinin nasıl kullanılacağını öğrendiniz. 
Fonksiyon/İşlev, çok çeşitli parametreler aracılığıyla önemli esneklik sağlar. Aşağıdaki bölüm, öğrendiklerinizin bir özetini sunar:</p>
<ul>
<li>Pandas pivot_table() fonksiyonu, Excel stili pivot tablolar oluşturmak için tanıdık bir arabirim sağlar</li>
<li>Fonksiyonlar, verilerin satır ve sütunlara göre nasıl bölüneceğini/gruplanacağını belirtmek için en azından <code>index=</code> veya <code>column=</code> parametrelerini gerektirir.</li>
<li>Fonksiyon, özel işlevlerin kullanılması da dahil olmak üzere bir veya birden çok toplama yöntemini hesaplayabilir</li>
<li>Fonksiyon, diğer herhangi bir DataFrame gibi filtrelenebilen veya sorgulanabilen bir DataFrame döndürür.</li>
</ul>
<h3>Kaynak:</h3>
<p>Bu Eğitimin hazırlanmasında faydalandığım kaynağın bağlantısını paylaşmak istiyorum. <a href="https://datagy.io/python-pivot-tables/">Pivot Tables in Pandas with Python for Python and Pandas - datagy</a></p>
<p><a href="pandas-09-veri-gruplama-yontemleri.html">← Önceki Bölüm</a> | <a href="pandas-11-melt-fonksiyonunun-kullanimi.html">Sonraki Bölüm →</a></p>

		<span class="post-tags">
			Tags:
			<ul>
					<li><a href="/tag/python.html">Python</a></li>
					<li><a href="/tag/pandas.html">Pandas</a></li>
					<li><a href="/tag/kutuphane.html">Kütüphane</a></li>
					<li><a href="/tag/modul.html">Modül</a></li>
					<li><a href="/tag/pivot.html">pivot</a></li>
					<li><a href="/tag/table.html">table</a></li>
					<li><a href="/tag/pivot-table.html">pivot table</a></li>
			</ul>
		</span>

</div>
		</div>
	</body>
</html>